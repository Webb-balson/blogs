<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Time and Memory Profiling for Python | Entiretydotai</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Time and Memory Profiling for Python" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Let’s save some time and memory, coz both are expensive." />
<meta property="og:description" content="Let’s save some time and memory, coz both are expensive." />
<link rel="canonical" href="https://entiretydotai.github.io/blogs/profiling/timing/memory/memoryleakage/profiler/memory_profiler/line_profiler/optimize/2020/06/01/profiling.html" />
<meta property="og:url" content="https://entiretydotai.github.io/blogs/profiling/timing/memory/memoryleakage/profiler/memory_profiler/line_profiler/optimize/2020/06/01/profiling.html" />
<meta property="og:site_name" content="Entiretydotai" />
<meta property="og:image" content="https://entiretydotai.github.io/blogs/images/profiling.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-01T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2020-06-01T00:00:00-05:00","dateModified":"2020-06-01T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://entiretydotai.github.io/blogs/profiling/timing/memory/memoryleakage/profiler/memory_profiler/line_profiler/optimize/2020/06/01/profiling.html"},"description":"Let’s save some time and memory, coz both are expensive.","image":"https://entiretydotai.github.io/blogs/images/profiling.jpg","@type":"BlogPosting","url":"https://entiretydotai.github.io/blogs/profiling/timing/memory/memoryleakage/profiler/memory_profiler/line_profiler/optimize/2020/06/01/profiling.html","headline":"Time and Memory Profiling for Python","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blogs/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://entiretydotai.github.io/blogs/feed.xml" title="Entiretydotai" /><link rel="shortcut icon" type="image/x-icon" href="/blogs/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Time and Memory Profiling for Python | Entiretydotai</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Time and Memory Profiling for Python" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Let’s save some time and memory, coz both are expensive." />
<meta property="og:description" content="Let’s save some time and memory, coz both are expensive." />
<link rel="canonical" href="https://entiretydotai.github.io/blogs/profiling/timing/memory/memoryleakage/profiler/memory_profiler/line_profiler/optimize/2020/06/01/profiling.html" />
<meta property="og:url" content="https://entiretydotai.github.io/blogs/profiling/timing/memory/memoryleakage/profiler/memory_profiler/line_profiler/optimize/2020/06/01/profiling.html" />
<meta property="og:site_name" content="Entiretydotai" />
<meta property="og:image" content="https://entiretydotai.github.io/blogs/images/profiling.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-01T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2020-06-01T00:00:00-05:00","dateModified":"2020-06-01T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://entiretydotai.github.io/blogs/profiling/timing/memory/memoryleakage/profiler/memory_profiler/line_profiler/optimize/2020/06/01/profiling.html"},"description":"Let’s save some time and memory, coz both are expensive.","image":"https://entiretydotai.github.io/blogs/images/profiling.jpg","@type":"BlogPosting","url":"https://entiretydotai.github.io/blogs/profiling/timing/memory/memoryleakage/profiler/memory_profiler/line_profiler/optimize/2020/06/01/profiling.html","headline":"Time and Memory Profiling for Python","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://entiretydotai.github.io/blogs/feed.xml" title="Entiretydotai" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/blogs/">Entiretydotai</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blogs/about/">About us</a><a class="page-link" href="/blogs/search/">Search</a><a class="page-link" href="/blogs/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Time and Memory Profiling for Python</h1><p class="page-description">Let&#39;s save some time and memory, coz both are expensive.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-06-01T00:00:00-05:00" itemprop="datePublished">
        Jun 1, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      7 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/blogs/categories/#profiling">profiling</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blogs/categories/#timing">timing</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blogs/categories/#memory">memory</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blogs/categories/#memoryleakage">memoryleakage</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blogs/categories/#profiler">profiler</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blogs/categories/#memory_profiler">memory_profiler</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blogs/categories/#line_profiler">line_profiler</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blogs/categories/#optimize">optimize</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/entiretydotai/blogs/tree/master/_notebooks/2020-06-01-profiling.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/blogs/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/entiretydotai/blogs/master?filepath=_notebooks%2F2020-06-01-profiling.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/blogs/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/entiretydotai/blogs/blob/master/_notebooks/2020-06-01-profiling.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/blogs/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#Introduction">Introduction </a></li>
<li class="toc-entry toc-h1"><a href="#Premature-Optimization-is-evil.">Premature Optimization is evil. </a></li>
<li class="toc-entry toc-h1"><a href="#Magic-functions-and-tools">Magic functions and tools </a></li>
<li class="toc-entry toc-h1"><a href="#Timeit">Timeit </a></li>
<li class="toc-entry toc-h1"><a href="#Timing-Profiling-with-Lprun">Timing Profiling with Lprun </a></li>
<li class="toc-entry toc-h1"><a href="#Memory-Profiling-with-mprun">Memory Profiling with mprun </a></li>
<li class="toc-entry toc-h1"><a href="#Memory-Leakage-using-pympler">Memory Leakage using pympler </a></li>
<li class="toc-entry toc-h1"><a href="#Read-More">Read More </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-06-01-profiling.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Introduction">
<a class="anchor" href="#Introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction<a class="anchor-link" href="#Introduction"> </a>
</h1>
<p>Every Developer desires to make their code optimzied and efficient. A dream where the developers want that their code to execute faster, with no memory leakage on the production system.</p>
<p>Let's make this dream true...</p>
<p>Creating Data-processing pipeline, writing new algorithms, Deploying Machine Learning models to server million users, Scientific calculation in astropyhsics, these are few areas where when we write code we want to profile every single line of code for two things</p>
<ol>
<li>The amount of time it is taking to execute where our goal is to reduce the time taken a.k.a Time Complexity.</li>
<li>The memory consumption for execution of that code where our goal is to reduce the memory usage a.k.a Space complexity.</li>
</ol>
<p>There always a trade-off between both of them some time we are fine with memory consumption but not with the time it takes and vice-versa based on the needs we check for the trade-off, but the best system is where we can reduce both space and time complexity.</p>
<h1 id="Premature-Optimization-is-evil.">
<a class="anchor" href="#Premature-Optimization-is-evil." aria-hidden="true"><span class="octicon octicon-link"></span></a>Premature Optimization is evil.<a class="anchor-link" href="#Premature-Optimization-is-evil."> </a>
</h1>
<p>Early in developing Algorithms we should think less about these things because it can be counter-productive which can lead to premature optimization  and its the root cause of all evil.</p>
<p>So first make it work then optimize it.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Magic-functions-and-tools">
<a class="anchor" href="#Magic-functions-and-tools" aria-hidden="true"><span class="octicon octicon-link"></span></a>Magic functions and tools<a class="anchor-link" href="#Magic-functions-and-tools"> </a>
</h1>
<p>While most of the data science experiments starts in Ipython Notebook. 
The Ipython enviroment gives us some magic functions which can be utilized to profile our code.</p>
<ol>
<li>
<a href="https://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-timeit">%%timeit</a>: Measuring time taken for the codeblock to run</li>
<li>
<a href="https://github.com/pyutils/line_profiler">%lprun</a>: Run code with the line-by-line profiler</li>
<li>
<a href="https://github.com/pythonprofilers/memory_profiler">%mprun</a>: Run code with the line-by-line memory profiler</li>
</ol>
<p>For Tracing Memory Leakage we can use <a href="https://pythonhosted.org/Pympler/index.html">Pympler</a>.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Timeit">
<a class="anchor" href="#Timeit" aria-hidden="true"><span class="octicon octicon-link"></span></a>Timeit<a class="anchor-link" href="#Timeit"> </a>
</h1>
<p>The usage of timeit is very simple just put the magic method on the top of the cell and it will calculate the time taken to execute the cell.</p>
<p>Let's compare vectorized vs non-vectorized version of numpy code.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">number</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">10000</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>it
<span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">number</span><span class="p">:</span>
    <span class="n">total</span><span class="o">+=</span><span class="n">i</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>3.11 ms ± 86.9 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>it
<span class="n">number</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>14.9 µs ± 74.3 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The difference in the execution time is evident one.</p>
<p>Non-vectorized code in Milliseconds, 10<sup>-3</sup>.<br>
Vectorized code in Microseconds, 10<sup>-6</sup>.</p>
<p>Vectorized code is the winner here.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Timing-Profiling-with-Lprun">
<a class="anchor" href="#Timing-Profiling-with-Lprun" aria-hidden="true"><span class="octicon octicon-link"></span></a>Timing Profiling with Lprun<a class="anchor-link" href="#Timing-Profiling-with-Lprun"> </a>
</h1>
<p>line_profiler is a package for doing line-by-line timing profiling of functions.</p>
<p>Install using</p>
<div class="highlight"><pre><span></span>pip install line_profiler
</pre></div>
<p>Python provides a builtin profiler, but we will be using Line profiler for reasons stated below.</p>
<p>The current profiling tools supported in Python 2.7 and later only time function calls. This is a good first step for locating hotspots in one's program and is frequently all one needs to do to optimize the program. However, sometimes the cause of the hotspot is actually a single line in the function, and that line may not be obvious from just reading the source code. These cases are particularly frequent in scientific computing. Functions tend to be larger (sometimes because of legitimate algorithmic complexity, sometimes because the programmer is still trying to write FORTRAN code), and a single statement without function calls can trigger lots of computation when using libraries like numpy. cProfile only times explicit function calls, not special methods called because of syntax. Consequently, a relatively slow numpy operation on large arrays like this,</p>
<div class="highlight"><pre><span></span><span class="n">a</span><span class="p">[</span><span class="n">large_index_array</span><span class="p">]</span> <span class="o">=</span> <span class="n">some_other_large_array</span>
</pre></div>
<p>is a hotspot that never gets broken out by cProfile because there is no explicit function call in that statement.</p>
<p>LineProfiler can be given functions to profile, and it will time the execution of each individual line inside those functions. In a typical workflow, one only cares about line timings of a few functions because wading through the results of timing every single line of code would be overwhelming. However, LineProfiler does need to be explicitly told what functions to profile.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># once installed we have load the extension</span>
<span class="o">%</span><span class="k">load_ext</span> line_profiler
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">some_operation</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">**</span><span class="mi">2</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span><span class="mi">2</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now the <code>%lprun</code> command will do a line-by-line profiling of any function–in this case, we need to tell it explicitly which functions we're interested in profiling:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">lprun</span> -f some_operation some_operation(np.random.randn(100))
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

<pre><code>Timer unit: 1e-06 s

Total time: 7.7e-05 s
File: &lt;ipython-input-30-80aca4fcfa96&gt;
Function: some_operation at line 1

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
     1                                           def some_operation(x):
     2         1         24.0     24.0     31.2      x = x **2
     3         1         22.0     22.0     28.6      x = x +2
     4         1         30.0     30.0     39.0      x = np.concatenate([x,x,x],axis=0)
     5         1          1.0      1.0      1.3      return x</code></pre>
<p>The source code of the function is printed with the timing information for each line. There are six columns of information.</p>
<ul>
<li>Line : The line number in the file.</li>
<li>Hits: The number of times that line was executed.</li>
<li>Time: The total amount of time spent executing the line in the timer's units. In the header information before the tables, you will see a line "Timer unit:" giving the conversion factor to seconds. It may be different on different systems.</li>
<li>Per Hit: The average amount of time spent executing the line once in the timer's units.</li>
<li>% Time: The percentage of time spent on that line relative to the total amount of recorded time spent in the function.</li>
<li>Line Contents: The actual source code. Note that this is always read from disk when the formatted results are viewed, not when the code was executed. If you have edited the file in the meantime, the lines will not match up, and the formatter may not even be able to locate the function for display.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Memory-Profiling-with-mprun">
<a class="anchor" href="#Memory-Profiling-with-mprun" aria-hidden="true"><span class="octicon octicon-link"></span></a>Memory Profiling with mprun<a class="anchor-link" href="#Memory-Profiling-with-mprun"> </a>
</h1>
<p>This is a python module for monitoring memory consumption of a process as well as line-by-line analysis of memory consumption for python programs.</p>
<p>Install</p>
<div class="highlight"><pre><span></span>pip install -U memory_profiler
</pre></div>
<p>The only issue mprun doesn't work on notebook rather on a python file so we will write the code in notebook <code>%%file</code> magic function we will write that into a file and execute mprun on it</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> memory_profiler
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%file</span> mprun.py
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="k">def</span> <span class="nf">some_operation</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">**</span><span class="mi">2</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span><span class="mi">2</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Overwriting mprun.py
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">mprun</span> <span class="kn">import</span> <span class="n">some_operation</span>
<span class="o">%</span><span class="k">mprun</span> -f some_operation some_operation(np.random.randn(100000))
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

<pre><code>Line #    Mem usage    Increment   Line Contents
================================================
     2     62.5 MiB     62.5 MiB   def some_operation(x):
     3     63.3 MiB      0.8 MiB       y = x **2
     4     64.0 MiB      0.8 MiB       z = y +2
     5     66.3 MiB      2.3 MiB       result = np.concatenate([x,y,z],axis=0)
     6     66.3 MiB      0.0 MiB       return result</code></pre>
<ul>
<li>The first column represents the line number of the code that has been profiled.</li>
<li>The second column (Mem usage) the memory usage of the Python interpreter after that line has been executed.</li>
<li>The third column (Increment) represents the difference in memory of the current line with respect to the last one.</li>
<li>The last column (Line Contents) prints the code that has been profiled.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Memory-Leakage-using-pympler">
<a class="anchor" href="#Memory-Leakage-using-pympler" aria-hidden="true"><span class="octicon octicon-link"></span></a>Memory Leakage using pympler<a class="anchor-link" href="#Memory-Leakage-using-pympler"> </a>
</h1>
<p>Pympler is a development tool to measure, monitor and analyze the memory behavior of Python objects in a running Python application.</p>
<p>By pympling a Python application, detailed insight in the size and the lifetime of Python objects can be obtained. Undesirable or unexpected runtime behavior like memory bloat and other “pymples” can easily be identified.</p>
<p>Pympler integrates three previously separate modules into a single, comprehensive profiling tool. The asizeof module provides basic size information for one or several Python objects, module muppy is used for on-line monitoring of a Python application and module Class Tracker provides off-line analysis of the lifetime of selected Python objects.</p>
<p>A web profiling frontend exposes process statistics, garbage visualisation and class tracker statistics.</p>
<p><a href="https://pythonhosted.org/Pympler/index.html#table-of-content">Hit table of content for tutorial</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Read-More">
<a class="anchor" href="#Read-More" aria-hidden="true"><span class="octicon octicon-link"></span></a>Read More<a class="anchor-link" href="#Read-More"> </a>
</h1>
<p><a href="https://rushter.com/blog/python-memory-managment/">Understanding Python Memory Managment</a></p>
<p><a href="https://rushter.com/blog/python-garbage-collector/">Python Garbage Collector</a></p>

</div>
</div>
</div>
</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="entiretydotai/blogs"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/blogs/profiling/timing/memory/memoryleakage/profiler/memory_profiler/line_profiler/optimize/2020/06/01/profiling.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blogs/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/blogs/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/blogs/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>ML/DL Meetup Community.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/entiretydotai" title="entiretydotai"><svg class="svg-icon grey"><use xlink:href="/blogs/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/entiretydotai" title="entiretydotai"><svg class="svg-icon grey"><use xlink:href="/blogs/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
